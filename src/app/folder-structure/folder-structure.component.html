<mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
        <button mat-icon-button disabled></button>
        <mat-icon class="type-icon" [attr.aria-label]="node.type + 'icon'">
            {{ 
                node.type === 'file'
                ? 'description'
                : treeControl.isExpanded(node)
                    ? 'folder_open'
                    : 'folder'
            }}
        </mat-icon>
        {{ node.name }}
    </mat-tree-node>

    <mat-tree-node *matTreeNodeDef="let node; when: hasNoContent" matTreeNodePadding>
        <button mat-icon-button disabled></button>
        <mat-form-field>
            <input matInput #itemValue placeholder="{{ node.type == 'folder' ? 'Folder': 'File'  }}">
        </mat-form-field>
        <button mat-button (click)="createCrud(node, itemValue.value)">Save</button>
    </mat-tree-node>

    <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
        <button 
            mat-icon-button matTreeNodeToggle
            [attr.aria-label]="'toggle ' + node.name"
        >
            <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.type != 'file'">
                {{
                    treeControl.isExpanded(node)
                        ? 'expand_more'
                        : 'chevron_right'
                }}
            </mat-icon>
        </button>

        <mat-icon class="type-icon" [attr.aria-label]="node.type + 'icon'">
            {{ 
                node.type === 'file'
                ? 'description'
                : treeControl.isExpanded(node)
                    ? 'folder_open'
                    : 'folder'
            }}
        </mat-icon>
        {{node.name}}
        
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="addNew(node, 'folder', 'random')">
                <mat-icon>create_new_folder</mat-icon>
                New Folder
            </button>
            <hr>
            <button mat-menu-item (click)="addNew(node, 'crud', 'random')">
                <mat-icon>insert_drive_file</mat-icon>
                Create Crud
            </button>            
            <button mat-menu-item (click)="addNew(node, 'file', 'random')">
                <mat-icon>insert_drive_file</mat-icon>
                New File
            </button>
            <button mat-menu-item (click)="deleteNode(node)">
                <mat-icon>insert_drive_file</mat-icon>
                Delete
            </button>            
          </mat-menu>        
    </mat-tree-node>
</mat-tree>
